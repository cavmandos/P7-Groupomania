{"ast":null,"code":"import \"core-js/modules/es.object.from-entries.js\";\nimport \"core-js/modules/es.json.stringify.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nexport default {\n  name: \"LoginView\",\n  data: function data() {\n    return {\n      user: null,\n      error: false,\n      valid: false\n    };\n  },\n  methods: {\n    login: function login(event) {\n      var _this = this;\n\n      var _Object$fromEntries = Object.fromEntries(new FormData(event.target)),\n          email = _Object$fromEntries.email,\n          password = _Object$fromEntries.password;\n\n      this.email = email;\n      this.password = password;\n      axios.post('http://localhost:3000/api/user/login', {\n        email: email,\n        password: password\n      }).then(function (res) {\n        _this.user = res.data;\n        _this.valid = 'User logged successfully';\n        _this.error = false;\n        localStorage.setItem('user', JSON.stringify(_this.user));\n        Swal.fire({\n          text: \"Connexion réussie\",\n          footer: \"Redirection en cours...\",\n          icon: \"success\",\n          timer: 1500,\n          showConfirmButton: false,\n          timerProgressBar: true\n        });\n\n        _this.$router.push(\"/main\");\n      }).catch(function (err) {\n        _this.valid = false;\n        _this.error = err.response.data.message;\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACAA,mBADA;AAEAC;AACA;AACAC,gBADA;AAEAC,kBAFA;AAGAC;AAHA;AAKA,GARA;AASAC;AACAC,SADA,iBACAC,KADA,EACA;AAAA;;AACA,mDACA,0BADA;AAAA;AAAA;;AAGA;AACA;AACAC,YACAC,IADA,CACA,sCADA,EACA;AACAC,oBADA;AAEAC;AAFA,OADA,EAKAC,IALA,CAKA;AACA;AACA;AACA;AACAC;AACAC;AACAC,mCADA;AAEAC,2CAFA;AAGAC,yBAHA;AAIAC,qBAJA;AAKAC,kCALA;AAMAC;AANA;;AAQA;AACA,OAnBA,EAoBAC,KApBA,CAoBA;AACA;AACA;AACA,OAvBA;AAwBA;AA/BA;AATA","names":["name","data","user","error","valid","methods","login","event","axios","post","email","password","then","localStorage","Swal","text","footer","icon","timer","showConfirmButton","timerProgressBar","catch"],"sourceRoot":"src/components","sources":["LoginView.vue"],"sourcesContent":["<template>\n   <v-app >\n      <v-main>\n         <v-container fluid fill-height>\n            <v-layout justify-center>\n               <v-flex xs12 sm8 md4>\n                  <v-card class=\"elevation-12\">\n                     <v-toolbar class=\"red lighten-4\">\n                        <v-toolbar-title>Se connecter</v-toolbar-title>\n                     </v-toolbar>\n                     <v-card-text>\n                     <form ref=\"form\" @submit.prevent=\"login()\">\n                            <v-text-field\n                              v-model=\"email\"\n                              name=\"email\"\n                              label=\"Email\"\n                              type=\"text\"\n                              placeholder=\"Votre adresse email\"\n                              required\n                           ></v-text-field>\n                           \n                            <v-text-field\n                              v-model=\"password\"\n                              name=\"password\"\n                              label=\"Mot de passe\"\n                              type=\"password\"\n                              placeholder=\"Votre mot de passe\"\n                              required\n                           ></v-text-field>\n                           <div class=\"btnCtn\">\n                              <v-btn type=\"submit\" class=\"mt-4 rounded-pill\" color=\"red lighten-4\" value=\"log in\">Se connecter</v-btn>\n                              <v-btn @click=\"goToRegister()\" class=\"mt-4 rounded-pill\" color=\"red lighten-5\">Créer un compte</v-btn>\n                           </div>\n                      </form>\n                     </v-card-text>\n                  </v-card>\n                \n               </v-flex>\n            </v-layout>\n         </v-container>\n      </v-main>\n   </v-app>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nexport default {\n  name: \"LoginView\",\n  data: function () {\n    return {\n      user: null,\n      error: false,\n      valid: false,\n    };\n  },\n  methods: {\n    login(event) {\n      const { email, password } = Object.fromEntries(\n        new FormData(event.target)\n      );\n      this.email = email;\n      this.password = password;\n      axios\n        .post('http://localhost:3000/api/user/login', {\n          email,\n          password,\n        })\n        .then((res) => {\n          this.user = res.data;\n          this.valid = 'User logged successfully';\n          this.error = false;\n          localStorage.setItem('user', JSON.stringify(this.user));\n          Swal.fire({\n                    text: \"Connexion réussie\",\n                    footer: \"Redirection en cours...\",\n                    icon: \"success\",\n                    timer: 1500,\n                    showConfirmButton: false,\n                    timerProgressBar: true,\n                })\n            this.$router.push(\"/main\");\n        })\n        .catch((err) => {\n          this.valid = false;\n          this.error = err.response.data.message;\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n   .btnCtn {\n      display: flex;\n      justify-content: space-between;\n   }\n</style>"]},"metadata":{},"sourceType":"module"}