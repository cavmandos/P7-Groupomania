{"ast":null,"code":"import \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.from-entries.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nvar url = 'http://localhost:3000/post/'; //{headers: { Authorization: 'Bearer ' + this.user.token }};\n\nexport default {\n  name: 'PostsView',\n  components: {},\n  data: function data() {\n    return {\n      user: null,\n      profile: false,\n      loading: false,\n      posts: [],\n      comments: [],\n      activities: [],\n      postTitle: '',\n      postContent: '',\n      postFile: '',\n      postErr: '',\n      commentErr: '',\n      commentOK: false\n    };\n  },\n  methods: {\n    filterComments: function filterComments(idPost) {\n      // console.log('filter is called');\n      return this.comments.filter(function (comment) {\n        return comment.postId == idPost;\n      });\n    },\n    logOut: function logOut() {\n      localStorage.removeItem('user');\n      this.user = null;\n      this.$router.push('/');\n    },\n    openProfile: function openProfile() {\n      alert(this.user.prenom);\n      return this.profile = true;\n    },\n    closeProfile: function closeProfile() {\n      alert('Profile page close');\n      return this.profile = false;\n    },\n    newPost: function newPost(event) {\n      var _Object$fromEntries = Object.fromEntries(new FormData(event.target)),\n          userId = _Object$fromEntries.userId,\n          title = _Object$fromEntries.title,\n          content = _Object$fromEntries.content,\n          image = _Object$fromEntries.image;\n\n      this.userId = this.user.prenom;\n      this.title = title;\n      this.content = content;\n      this.image = image;\n      console.log({\n        userId: userId,\n        title: title,\n        content: content,\n        image: image\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    if (!localStorage.getItem('user')) {\n      this.$router.push('/');\n    } else {\n      this.user = JSON.parse(localStorage.getItem('user')); // Get all posts\n\n      axios.get(\"\".concat(url, \"post\")).then(function (res) {\n        _this.posts = res.data;\n      }).catch(function (err) {\n        _this.postErr = err;\n      }); // Get all comments\n\n      axios.get(\"\".concat(url, \"comment\")).then(function (res) {\n        _this.comments = res.data;\n        _this.loading = false;\n      }).catch(function (err) {\n        _this.commentErr = err;\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA;AACA,wC,CACA;;AACA;AACAA,mBADA;AAEAC,gBAFA;AAKAC;AACA;AACAC,gBADA;AAEAC,oBAFA;AAGAC,oBAHA;AAIAC,eAJA;AAKAC,kBALA;AAMAC,oBANA;AAOAC,mBAPA;AAQAC,qBARA;AASAC,kBATA;AAUAC,iBAVA;AAWAC,oBAXA;AAYAC;AAZA;AAcA,GApBA;AAqBAC;AACAC,kBADA,0BACAC,MADA,EACA;AACA;AACA;AAAA;AAAA;AACA,KAJA;AAKAC,UALA,oBAKA;AACAC;AACA;AACA;AACA,KATA;AAUAC,eAVA,yBAUA;AACAC;AACA;AACA,KAbA;AAcAC,gBAdA,0BAcA;AACAD;AACA;AACA,KAjBA;AAkBAE,WAlBA,mBAkBAC,KAlBA,EAkBA;AACA,mDACA,0BADA;AAAA;AAAA;AAAA;AAAA;;AAGA;AACA;AACA;AACA;AACAC;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;AACA;AA3BA,GArBA;AAkDAC,SAlDA,qBAkDA;AAAA;;AACA;AACA;AACA,KAFA,MAEA;AACA,2DADA,CAEA;;AACAC,YACAC,GADA,WACAC,GADA,WAEAC,IAFA,CAEA;AACA;AACA,OAJA,EAKAC,KALA,CAKA;AACA;AACA,OAPA,EAHA,CAWA;;AACAJ,YACAC,GADA,WACAC,GADA,cAEAC,IAFA,CAEA;AACA;AACA;AACA,OALA,EAMAC,KANA,CAMA;AACA;AACA,OARA;AASA;AACA;AA3EA","names":["name","components","data","user","profile","loading","posts","comments","activities","postTitle","postContent","postFile","postErr","commentErr","commentOK","methods","filterComments","idPost","logOut","localStorage","openProfile","alert","closeProfile","newPost","event","console","userId","title","content","image","mounted","axios","get","url","then","catch"],"sourceRoot":"src/components","sources":["PostsView.vue"],"sourcesContent":["<template>\n  <div class=\"page-container\">\n    <header>\n      <div class=\"header-content\">\n        <div class=\"picture\" @click=\"openProfile()\">\n          <img src=\"\" alt=\"profile-picture\" />\n        </div>\n        <ul>\n          <li>\n            <div @click=\"openProfile()\">\n              <i class=\"fa-solid fa-user\"></i><span>Profile</span>\n            </div>\n            <div @click=\"logOut()\">\n              <i class=\"fa-solid fa-arrow-right-from-bracket\"></i\n              ><span>Log Out</span>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </header>\n    <main class=\"activities-container\">\n      <div class=\"logo-wrapper\">\n        <img\n          class=\"logo\"\n          src=\"../assets/icon.png\"\n          alt=\"logo groupomania\"\n        />\n      </div>\n      <div class=\"form-container\">\n        <h1>New post</h1>\n        <form @submit.prevent=\"newPost\">\n          <div class=\"form-group\">\n            <label for=\"title\">Title : </label>\n            <input\n              type=\"text\"\n              name=\"title\"\n              id=\"title\"\n              placeholder=\"Title of your post...\"\n              required\n              minLength=\"5\"\n              maxlength=\"70\"\n            />\n            <p class=\"err-msg\"></p>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"content\">Content : </label>\n            <input\n              type=\"textarea\"\n              name=\"content\"\n              id=\"content\"\n              placeholder=\"Content of your post...\"\n              required\n              maxlength=\"250\"\n            />\n          </div>\n          <div class=\"form-group\">\n            <label for=\"file\" id=\"file-btn\">image</label>\n            <input id=\"file\" type=\"file\" name=\"image\" />\n          </div>\n          <div class=\"form-group\">\n            <button type=\"submit\">Post !</button>\n          </div>\n        </form>\n      </div>\n      <div class=\"error-msg\" v-if=\"postErr || commentErr\">\n        <p>{{ postErr }}</p>\n        <p>{{ commentErr }}</p>\n      </div>\n      <!-- ###### POSTS ###### -->\n      <section class=\"all-posts-container\">\n        <!-- 1 post -->\n        <div class=\"post-container\" v-for=\"post in posts\" :key=\"post.id\">\n          <div class=\"infos\">\n            <div class=\"author\">\n              <img src=\"../assets/default_user.jpg\" alt=\"Profile picture\" />\n              <p class=\"username\">UserID: {{ post.userId }}</p>\n            </div>\n            <p class=\"date\">{{ post.date }}</p>\n          </div>\n          <div class=\"content\">\n            <h3>{{ post.title }}</h3>\n            <p>\n              {{ post.content }}\n            </p>\n            <img src=\"../assets/home-bg.jpg\" alt=\"#\" />\n          </div>\n          <div class=\"actions\">\n            <div class=\"owner-actions\" v-if=\"user.userId == post.userId\">\n              <i class=\"fa-solid fa-pen\"></i>\n              <i class=\"fa-solid fa-trash\"></i>\n            </div>\n            <i class=\"fa-solid fa-reply\"></i>\n          </div>\n          <!-- 1 Comment -->\n          <div\n            class=\"comment-container\"\n            v-for=\"comment in filterComments(post.id)\"\n            :key=\"comment.id\"\n          >\n            <div class=\"comment-infos\">\n              <img src=\"../assets/default_user.jpg\" alt=\"Profile picture\" />\n              <p class=\"comment-username\">PostID: {{ comment.postId }}</p>\n              <p class=\"comment-date\">{{ comment.date }}</p>\n            </div>\n            <div class=\"comment-content\">\n              <p>\n                {{ comment.content }}\n              </p>\n            </div>\n            <div class=\"comment-actions\">\n              <div\n                class=\"comment-owner-actions\"\n                v-if=\"user.userId == comment.userId\"\n              >\n                <i class=\"fa-solid fa-pen\"></i>\n                <i class=\"fa-solid fa-trash\"></i>\n              </div>\n              <i class=\"fa-solid fa-reply\"></i>\n            </div>\n          </div>\n          <!-- End comment -->\n        </div>\n        <!-- End post -->\n      </section>\n    </main>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nconst url = 'http://localhost:3000/post/';\n//{headers: { Authorization: 'Bearer ' + this.user.token }};\nexport default {\n  name: 'PostsView',\n  components: {\n    \n  },\n  data: function () {\n    return {\n      user: null,\n      profile: false,\n      loading: false,\n      posts: [],\n      comments: [],\n      activities: [],\n      postTitle: '',\n      postContent: '',\n      postFile: '',\n      postErr: '',\n      commentErr: '',\n      commentOK: false,\n    };\n  },\n  methods: {\n    filterComments(idPost) {\n      // console.log('filter is called');\n      return this.comments.filter((comment) => comment.postId == idPost);\n    },\n    logOut() {\n      localStorage.removeItem('user');\n      this.user = null;\n      this.$router.push('/');\n    },\n    openProfile() {\n      alert(this.user.prenom);\n      return (this.profile = true);\n    },\n    closeProfile() {\n      alert('Profile page close');\n      return (this.profile = false);\n    },\n    newPost(event) {\n      const { userId, title, content, image } = Object.fromEntries(\n        new FormData(event.target)\n      );\n      this.userId = this.user.prenom;\n      this.title = title;\n      this.content = content;\n      this.image = image;\n      console.log({ userId, title, content, image });\n    },\n  },\n  mounted() {\n    if (!localStorage.getItem('user')) {\n      this.$router.push('/');\n    } else {\n      this.user = JSON.parse(localStorage.getItem('user'));\n      // Get all posts\n      axios\n        .get(`${url}post`)\n        .then((res) => {\n          this.posts = res.data;\n        })\n        .catch((err) => {\n          this.postErr = err;\n        });\n      // Get all comments\n      axios\n        .get(`${url}comment`)\n        .then((res) => {\n          this.comments = res.data;\n          this.loading = false;\n        })\n        .catch((err) => {\n          this.commentErr = err;\n        });\n    }\n  },\n};\n</script>\n\n<style scoped>\n/*MAIN WRAPPER*/\n.page-container {\n  width: 1440px;\n  min-height: 100vh;\n  margin: auto;\n  display: flex;\n}\n/*HEADER*/\nheader {\n  min-height: 100vh;\n  background-color: var(--transp2);\n}\n.header-content {\n  min-width: 15rem;\n  max-width: 15rem;\n  padding: 2rem 0;\n  display: flex;\n  flex-direction: column;\n  position: sticky;\n  top: 0;\n}\nheader .picture {\n  width: 4rem;\n  height: 4rem;\n  overflow: hidden;\n  margin-bottom: 2rem;\n  align-self: center;\n  border-radius: 10px;\n}\n.picture img {\n  width: inherit;\n  height: inherit;\n  object-fit: cover;\n}\nheader ul li {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding-left: 1rem;\n}\nheader li div {\n  color: var(--white);\n  font-size: 1.1rem;\n  font-family: var(--font-2);\n  margin: 0.5rem 0;\n  transition: 0.4s;\n  width: 6.1rem;\n  cursor: pointer;\n}\nheader li div:hover {\n  color: #dd00ff;\n}\nheader li i {\n  width: 1rem;\n}\nheader li span {\n  font-size: 1rem;\n  margin-left: 1rem;\n}\n/*ACTIVITIES*/\n.activities-container {\n  width: 100%;\n}\n.logo-wrapper {\n  text-align: center;\n  width: 100%;\n}\n.logo {\n  margin: 2rem;\n  width: 21rem;\n  height: 4rem;\n  object-fit: cover;\n}\n.form-container {\n  background-color: var(--transp2);\n  width: 60%;\n  margin: auto;\n}\n.form-container h1 {\n  font-family: var(--font-2);\n  color: var(--secondary);\n  text-align: center;\n  padding-top: 0.5rem;\n  font-size: 1.5rem;\n}\n.form-group {\n  width: 90%;\n  margin: auto;\n  display: flex;\n  flex-direction: column;\n  padding: 0.3rem 1.5rem;\n}\n.form-group label {\n  font-family: var(--font-2);\n  font-size: 1.1rem;\n  color: var(--white);\n  width: 100%;\n  margin-bottom: 0.3rem;\n}\n.form-group input {\n  width: 100%;\n  padding: 0.6rem;\n  outline: 1px solid --black;\n}\n.form-group input::placeholder {\n  color: var(--primary);\n}\n#file-btn {\n  background-color: var(--white);\n  color: var(--primary);\n  width: 6rem;\n  text-align: center;\n  padding: 0.3rem;\n  cursor: pointer;\n  outline: var(--black) 1px solid;\n}\n#file {\n  display: none;\n}\n.form-group button {\n  width: 7rem;\n  align-self: center;\n  padding: 0.6rem 0;\n  cursor: pointer;\n  color: var(--white);\n  background-color: var(--secondary);\n  font-size: 1.1rem;\n  font-weight: 700;\n  transition: 0.4s;\n}\n.form-group button:hover {\n  outline: var(--white) 1px solid;\n  background-color: transparent;\n}\n.error-msg {\n  background-color: var(--red);\n  width: 60%;\n  margin: 1rem auto;\n  text-align: center;\n  color: var(--white);\n  display: none;\n}\n/*POSTS + COMMENTS*/\n.all-posts-container {\n  width: 60%;\n  margin: auto;\n}\n.infos {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.5rem 1rem;\n  background-color: var(--white);\n  border-bottom: 1px solid var(--primary);\n  color: var(--primary);\n  font-weight: bolder;\n}\n.author {\n  display: flex;\n  align-items: center;\n}\n.infos img {\n  width: 3rem;\n  height: 3rem;\n  border-radius: 50%;\n  margin-right: 0.5rem;\n}\n.content {\n  padding: 0.5rem 1rem 0 1rem;\n  background-color: var(--white);\n}\n.content h3 {\n  font-size: 1.1rem;\n}\n.content img {\n  width: 100%;\n  height: 300px;\n  object-fit: cover;\n  margin-bottom: 0.5rem;\n}\n.content p {\n  text-align: justify;\n}\n.actions {\n  display: flex;\n  justify-content: flex-end;\n  padding: 0rem 1rem;\n  background-color: var(--white);\n}\n.actions i {\n  color: var(--primary);\n  font-size: 1.2rem;\n  margin: 0 0.5rem;\n  transition: 0.4s;\n  cursor: pointer;\n}\n.actions .fa-trash {\n  color: var(--red);\n}\n.actions i:hover,\n.comment-actions i:hover {\n  opacity: 0.7;\n  transform: scale(1.2);\n}\n.comment-container {\n  background-color: var(--gray);\n  padding: 1rem;\n  font-size: 0.8rem;\n}\n.comment-infos {\n  background-color: var(--white);\n  display: flex;\n  align-items: center;\n  position: relative;\n  color: var(--primary);\n  border-bottom: 1px solid var(--gray);\n}\n.comment-infos img {\n  width: 2rem;\n  height: 2rem;\n  border-radius: 50%;\n  margin-right: 1rem;\n}\n.comment-username {\n  font-weight: bolder;\n}\n.comment-date {\n  width: auto;\n  margin-left: auto;\n}\n.comment-content {\n  background-color: var(--white);\n  font-style: italic;\n  padding: 0.3rem;\n}\n.comment-actions {\n  display: flex;\n  background-color: var(--white);\n  align-items: center;\n  justify-content: flex-end;\n}\n.comment-actions i {\n  margin: 0 0.3rem;\n  padding: 0.3rem 0;\n  cursor: pointer;\n}\n/*RESPONSIVE*/\n@media screen and (max-width: 1440px) {\n  .page-container {\n    width: 90%;\n  }\n  .form-container,\n  .all-posts-container {\n    width: 80%;\n  }\n}\n@media screen and (max-width: 1024px) {\n  .page-container {\n    flex-direction: column;\n  }\n  header {\n    min-height: 6rem;\n    max-height: 7rem;\n    display: flex;\n    align-items: center;\n    position: sticky;\n    z-index: 100;\n    top: 0;\n    background-color: var(--transp5);\n    backdrop-filter: blur(2px);\n  }\n  .header-content {\n    min-width: 90%;\n    margin: auto;\n    padding: 0;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n  header .picture {\n    margin-bottom: 0;\n    align-self: center;\n    outline: none;\n  }\n  header ul li {\n    flex-direction: row;\n    align-items: center;\n    padding-left: 1rem;\n  }\n  header li div {\n    margin: 0;\n  }\n  .logo-wrapper {\n    display: none;\n  }\n  .form-container {\n    margin-top: 2rem;\n  }\n  .form-container,\n  .all-posts-container {\n    width: 80%;\n  }\n}\n@media screen and (max-width: 800px) {\n  .page-container {\n    width: 100%;\n  }\n  header li div {\n    width: auto;\n  }\n  header li i {\n    width: auto;\n    font-size: 1.5rem;\n    padding: 0 1rem;\n  }\n  header li span {\n    display: none;\n  }\n  header .picture {\n    width: 3.2rem;\n    height: 3.2rem;\n    border-radius: 50%;\n  }\n  .form-container,\n  .all-posts-container {\n    width: 100%;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}